"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[51477],{81730:function(e,t,n){n.d(t,{w:function(){return useTokenInfo}});var a=n(5068);let i={fetcher:async function(e){try{let t=await fetch("https://api.dexscreener.com/tokens/v1/base/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("HTTP error! Status: ".concat(t.status));let n=await t.json();return n}catch(e){throw console.error("Error fetching dex token info:",e.message),e}},key:"getDexTokenInfo"};var u=n(74932);let s={PRICE:"< $0.01",MARKET_CAP:"< $300 k",LIQUIDITY:"< $200 k",VOLUME:"< $10 k",CHANGE:0},formatPrice=e=>e?"$".concat(e):s.PRICE,formatMarketCap=e=>null!=e?(0,u.$j)(e):s.MARKET_CAP,formatLiquidity=e=>(null==e?void 0:e.usd)!=null?(0,u.$j)(e.usd):s.LIQUIDITY,formatVolume=e=>(null==e?void 0:e.h24)!=null?(0,u.$j)(e.h24):s.VOLUME,formatChange=e=>(null==e?void 0:e.h24)!=null?e.h24:s.CHANGE;function useTokenInfo(e){let{data:t,isLoading:n,error:u}=(0,a.ZP)(e?[i.key,e]:null,()=>i.fetcher(e),{refreshInterval:6e4}),s=null==t?void 0:t[0];return{pair:s,price:formatPrice(null==s?void 0:s.priceUsd),marketCap:formatMarketCap(null==s?void 0:s.marketCap),liquidity:formatLiquidity(null==s?void 0:s.liquidity),volume:formatVolume(null==s?void 0:s.volume),change:formatChange(null==s?void 0:s.priceChange),isLoading:n,error:u}}},23778:function(e,t,n){n.d(t,{j:function(){return getFriendlyErrorMsg}});let a=[{keywords:["User rejected the request"],message:"Transaction request rejected by user"}];function getFriendlyErrorMsg(e){let t=(null==e?void 0:e.message)||String(e)||"Error: Unknown";for(let e of a)if(e.keywords.some(e=>t.toLowerCase().includes(e.toLowerCase())))return e.message;return t}},73617:function(e,t,n){n.d(t,{V:function(){return a}});let a=[{type:"constructor",inputs:[{name:"_raiseStartTime",type:"uint256",internalType:"uint256"},{name:"_raiseEndTime",type:"uint256",internalType:"uint256"},{name:"_projectTokenAddress",type:"address",internalType:"address"},{name:"_projectTokenAmount",type:"uint256",internalType:"uint256"},{name:"_raiseTokenAddress",type:"address",internalType:"address"},{name:"_targetRaisingAmount",type:"uint256",internalType:"uint256"},{name:"_WETH",type:"address",internalType:"address"},{name:"_liquidityPool",type:"address",internalType:"address"},{name:"_v3Router",type:"address",internalType:"address"},{name:"_owner",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"ETH_IDENTIFIER",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"POOL_FEE",inputs:[],outputs:[{name:"",type:"uint24",internalType:"uint24"}],stateMutability:"view"},{type:"function",name:"WETH",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"accumulatedRaiseAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"addPoolInitializer",inputs:[{name:"poolInitializer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"allowSelfClaim",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"balanceOf",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"batchClaimAndRefund",inputs:[{name:"users",type:"address[]",internalType:"address[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"batchRefund",inputs:[{name:"users",type:"address[]",internalType:"address[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"claimAndRefund",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"claimableAmount",type:"uint256",internalType:"uint256"},{name:"refundAmount",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"claimable",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[{name:"claimableAmount",type:"uint256",internalType:"uint256"},{name:"refundAmount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"collectRaisedToken",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"deposit",inputs:[{name:"raiseAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"getAllocatedProjectToken",inputs:[],outputs:[{name:"remaining",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getCurrentTargetAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getCurrentTimeWindow",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDepositBalancesByUsers",inputs:[{name:"userAddresses",type:"address[]",internalType:"address[]"}],outputs:[{name:"",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"getProjectTokenRemaining",inputs:[],outputs:[{name:"remaining",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getRaiseTokenQuoteForWETH",inputs:[{name:"baseAmount",type:"uint256",internalType:"uint256"}],outputs:[{name:"quote",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTimeWindowInfos",inputs:[],outputs:[{name:"",type:"tuple[]",internalType:"struct DASeedingContract.TimeWindowInfo[]",components:[{name:"startTime",type:"uint256",internalType:"uint256"},{name:"endTime",type:"uint256",internalType:"uint256"},{name:"projectTokenSold",type:"uint256",internalType:"uint256"},{name:"raiseTokenReceived",type:"uint256",internalType:"uint256"},{name:"numberOfDeposits",type:"uint256",internalType:"uint256"}]}],stateMutability:"view"},{type:"function",name:"getUnlockStatus",inputs:[],outputs:[{name:"",type:"uint8",internalType:"enum ISeedingContract.UnlockStatus"}],stateMutability:"view"},{type:"function",name:"initializeVaultAndDistribution",inputs:[{name:"poolInitializer",type:"address",internalType:"address"},{name:"_teamUnlockVault",type:"address",internalType:"address"},{name:"_tokenDistribution",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"investCapPerWallet",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"liquidityPool",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"moveProjectTokens",inputs:[{name:"poolInitializer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"numOfTimeWindows",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"ownerCollected",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"projectToken",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"projectTokenAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"projectTokensSold",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"raiseEndTime",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"raiseStartTime",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"raiseToken",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"refund",inputs:[{name:"user",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"secondsAgo",inputs:[],outputs:[{name:"",type:"uint32",internalType:"uint32"}],stateMutability:"view"},{type:"function",name:"setAllowSelfClaim",inputs:[{name:"_allowSelfClaim",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setAuctionParameters",inputs:[{name:"_poolInitializer",type:"address",internalType:"address"},{name:"_startTargetAmount",type:"uint256",internalType:"uint256"},{name:"_numOfTimeWindows",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setInvestCapPerWallet",inputs:[{name:"_investCapPerWallet",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setLiquidityPool",inputs:[{name:"_liquidityPool",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setProjectTokenAddress",inputs:[{name:"_projectTokenAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRaisePeriod",inputs:[{name:"_raiseStartTime",type:"uint256",internalType:"uint256"},{name:"_raiseEndTime",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setRaiseTokenAddress",inputs:[{name:"_raiseTokenAddress",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSecondsAgo",inputs:[{name:"_secondsAgo",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSlippage",inputs:[{name:"_slippage",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSwapPoolFee",inputs:[{name:"_swapPoolFee",type:"uint24",internalType:"uint24"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setTargetRaisingAmount",inputs:[{name:"_targetRaisingAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setTeamUnlockVault",inputs:[{name:"_teamUnlockVault",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"slippage",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"status",inputs:[],outputs:[{name:"",type:"uint8",internalType:"enum ISeedingContract.Status"}],stateMutability:"view"},{type:"function",name:"targetRaisingAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"teamUnlockVault",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"timeWindowDuration",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"timeWindowInfos",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"startTime",type:"uint256",internalType:"uint256"},{name:"endTime",type:"uint256",internalType:"uint256"},{name:"projectTokenSold",type:"uint256",internalType:"uint256"},{name:"raiseTokenReceived",type:"uint256",internalType:"uint256"},{name:"numberOfDeposits",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"tokenDistribution",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"tokenDistributionCompleted",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unClaimedProjectTokenAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"upperTargetAmount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userDepositBalance",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"userProjectTokenBalance",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"v3Router",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"whiteListPoolManager",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"Claimed",inputs:[{name:"claimer",type:"address",indexed:!0,internalType:"address"},{name:"imoAmount",type:"uint256",indexed:!0,internalType:"uint256"},{name:"refundAmount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Deposit",inputs:[{name:"depositor",type:"address",indexed:!0,internalType:"address"},{name:"depositAmount",type:"uint256",indexed:!0,internalType:"uint256"},{name:"projectTokenAmount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"NewAuctionParameters",inputs:[{name:"startPrice",type:"uint256",indexed:!1,internalType:"uint256"},{name:"endPrice",type:"uint256",indexed:!1,internalType:"uint256"},{name:"numOfTimeWindows",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"NewProjectTokenAddress",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"NewRaiseTimes",inputs:[{name:"raiseStartTime",type:"uint256",indexed:!0,internalType:"uint256"},{name:"raiseEndTime",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"NewRaiseTokenAddress",inputs:[{name:"tokenAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"NewSlippage",inputs:[{name:"slippage",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"NewSwapLiquidityPool",inputs:[{name:"NewSwapLiquidityPool",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"NewTargetRaisingAmount",inputs:[{name:"targetRaisingAmount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OwnerCollect",inputs:[{name:"raiseToken",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"PoolInitiationFailed",inputs:[{name:"poolInitializer",type:"address",indexed:!0,internalType:"address"},{name:"projectToken",type:"address",indexed:!0,internalType:"address"},{name:"raiseToken",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ProjectTokenMoved",inputs:[{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Refund",inputs:[{name:"refunder",type:"address",indexed:!0,internalType:"address"},{name:"refundAmount",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"TeamUnlockVaultUpdated",inputs:[{name:"newTeamUnlockVault",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]},{type:"error",name:"SafeERC20FailedOperation",inputs:[{name:"token",type:"address",internalType:"address"}]}]},15427:function(e,t,n){n.d(t,{g:function(){return useSeeding}});var a=n(67294),i=n(92321),u=n(71366),s=n(37003),r=n(73617),o=n(86876),p=n(48470),l=n(4222),d=n(15671),y=n(16693),m=n(14679),c=n(79570),T=n(11163),f=n(59913),b=n(23778);function useSeeding(e,t){let n=null==t?void 0:t.raise_token_address,v=(0,T.useRouter)(),{address:w}=(0,i.m)(),{frontierUserInfo:M}=(0,c.Z)(),g=null==M?void 0:M.developer_id,{id:k}=v.query,C=null==t?void 0:t.id,[h,A]=(0,a.useState)(null),[S,N]=(0,a.useState)(null),[P,I]=(0,a.useState)(!1),[_,E]=(0,a.useState)("idle"),[x,j]=(0,a.useState)(""),[L,R]=(0,a.useState)(null),[V,D]=(0,a.useState)(0),[O,W]=(0,a.useState)(null),[F,U]=(0,a.useState)(null),[q,Q]=(0,a.useState)(null),[Z,z]=(0,a.useState)(null),[$,B]=(0,a.useState)(null),[H,G]=(0,a.useState)(null),[Y,J]=(0,a.useState)(null),[K,X]=(0,a.useState)(null),[ee,et]=(0,a.useState)(null),[en,ea]=(0,a.useState)(null),[ei,eu]=(0,a.useState)(null),[es,er]=(0,a.useState)("0"),[eo,ep]=(0,a.useState)("0"),[el,ed]=(0,a.useState)(null),[ey,em]=(0,a.useState)(null),[ec,eT]=(0,a.useState)(null),[ef,eb]=(0,a.useState)(null),[ev,ew]=(0,a.useState)(null),[eM,eg]=(0,a.useState)(0),ek=(0,u.S)(),eC=(0,u.S)(),eh=(0,a.useCallback)(async()=>{if(e)try{let[t,n,a,i,u,l,d,y,m,c,T,f]=await Promise.all([(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"getCurrentTargetAmount",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"projectTokenAmount",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"raiseStartTime",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"raiseEndTime",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"upperTargetAmount",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"targetRaisingAmount",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"numOfTimeWindows",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"timeWindowDuration",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"getCurrentTimeWindow",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"accumulatedRaiseAmount",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"projectTokensSold",chainId:o.rC}),(0,s.L)(o.vc,{address:e,abi:r.V,functionName:"status",chainId:o.rC})]),b=null;try{b=await (0,s.L)(o.vc,{address:e,abi:r.V,functionName:"investCapPerWallet",chainId:o.rC})}catch(e){console.warn("Failed to fetch investCapPerWallet, using default value:",e)}let v=Number((0,p.bM)(t,null!=el?el:o.ZQ)),w=Number((0,p.bM)(n,null!=ey?ey:18)),M=Number((0,p.bM)(u,null!=el?el:o.ZQ)),g=Number((0,p.bM)(l,null!=el?el:o.ZQ));w>0?(eT(w),A(v/w),W(M/w),U(g/w)):(A(null),W(null),U(null));let k=Number((0,p.bM)(T,null!=ey?ey:o.G$)),C=w-k,h=w>0?Math.floor(C/w*100):0;if(N(Math.max(0,Math.min(100,h))),Q(Number(a)),z(Number(i)),B(Number(d)),G(Number(y)),J(Number(m)),m&&y&&a){let e=Math.floor(Date.now()/1e3),t=Number(a)+Number(m)*Number(y);R(t>e?t-e:0)}if(i){let e=Math.floor(Date.now()/1e3);D(Number(i)>e?Number(i)-e:0)}let S=Number((0,p.bM)(c,null!=el?el:o.ZQ));X(S),et(g),ea(g>0?S/g*100:0),eb(Number(f));let P=null!=b?Number(b):1e6,I=Number((0,p.bM)(P,null!=el?el:o.ZQ));ew(I)}catch(e){console.error("Error fetching seeding data:",e)}},[e,el,ey,t]),eA=(0,a.useCallback)(async()=>{if(w&&e)try{let t=await (0,s.L)(o.vc,{address:n,abi:y.Wo,functionName:"balanceOf",args:[w],chainId:o.rC});er((0,p.bM)(t,null!=el?el:o.ZQ));let a=await (0,s.L)(o.vc,{address:n,abi:y.Wo,functionName:"allowance",args:[w,e]});ep((0,p.bM)(a,null!=el?el:o.ZQ));let i=await (0,s.L)(o.vc,{address:e,abi:r.V,functionName:"userDepositBalance",args:[w],chainId:o.rC});eg(Number((0,p.bM)(i,null!=el?el:o.ZQ)))}catch(e){er("0"),ep("0"),eg(0)}},[w,e,_,el]);(0,a.useEffect)(()=>{eh()},[eh]),(0,a.useEffect)(()=>{eA()},[eA]),(0,a.useEffect)(()=>{(async function(){if(e)try{let t=await (0,s.L)(o.vc,{address:e,abi:r.V,functionName:"projectToken"}),a=await (0,s.L)(o.vc,{address:n,abi:y.Wo,functionName:"decimals"});ed(Number(a));let i=await (0,s.L)(o.vc,{address:t,abi:y.Wo,functionName:"decimals"});em(Number(i))}catch(e){ed(null),em(null)}})()},[e,n]);let doApprove=async()=>{if(!w){j("Please connect wallet"),E("error");return}j(""),I(!0),E("approving");try{ek.writeContract({address:n,abi:y.Wo,functionName:"approve",args:[e,l.Bz]})}catch(e){E("error"),j((0,b.j)(e)),I(!1)}},invest=async t=>{if(!w){j("Please connect wallet"),E("error");return}let n=Number(t),a=eM+n;if(null!==ev&&a>ev){j("Investment cap exceeded. Maximum allowed: ".concat(ev," USDC. Current: ").concat(eM," USDC. You can invest up to: ").concat(ev-eM," USDC")),E("error"),I(!1);return}j(""),I(!0),E("investing");let i=(0,p.vz)(t,null!=el?el:o.ZQ);try{eC.writeContract({address:e,abi:r.V,functionName:"deposit",args:[i],value:BigInt(0)})}catch(e){E("error"),j((0,b.j)(e)),I(!1)}eu(t)};(0,a.useEffect)(()=>{ek.isPending&&E("approving"),eC.isPending&&E("investing"),ek.isError&&(E("error"),j((0,b.j)(ek.error)||"Error: Approve Failed"),I(!1)),eC.isError&&(E("error"),j((0,b.j)(eC.error)||"Error: Deposit Failed"),I(!1));let waitForApproveConfirm=async()=>{if(ek.data&&ek.isSuccess){I(!0);try{await (0,m.e)(o.vc,{hash:ek.data}),E("approved")}catch(e){E("error"),j((0,b.j)(e)||"Error: Approve Confirm Failed")}finally{I(!1)}}};waitForApproveConfirm();let waitForDepositConfirm=async()=>{if(eC.data&&eC.isSuccess){I(!0);try{let t=await (0,m.e)(o.vc,{hash:eC.data});E("success");let n=!1,a=null,i=null;try{if(t&&t.logs&&t.logs.length>0){let u=new d.vU(r.V);for(let s of t.logs)if(s.address.toLowerCase()===e.toLowerCase())try{let e=u.parseLog({topics:s.topics,data:s.data});if(e&&"Deposit"===e.name){a=e.args.depositAmount,i=e.args.projectTokenAmount,a=parseFloat((0,p.bM)(a,null!=el?el:o.ZQ)),i=parseFloat((0,p.bM)(i,null!=ey?ey:18)),n=!0;break}}catch(e){}}}catch(e){}if(C&&g&&w&&k){if(n&&null!==a&&null!==i)await f.vx.fetcher(k,{project_id:C,developer_id:g,amount:a,token_amount:i,wallet_address:w,unique_key:eC.data,extra_info:JSON.stringify({fromEvent:!0})});else if(ei){let e=h?parseFloat(ei)/h:0;await f.vx.fetcher(k,{project_id:C,developer_id:g,amount:parseFloat(ei),token_amount:e,wallet_address:w,unique_key:eC.data,extra_info:JSON.stringify({fromEvent:!1})})}}}catch(e){E("error"),j((0,b.j)(e)||"Error: Deposit Confirm Failed")}finally{I(!1)}}};waitForDepositConfirm()},[ek.isPending,eC.isPending,ek.isError,eC.isError,ek.isSuccess,ek.data,eC.isSuccess,eC.data,C,g,w,k,ei,h]);let eS=(0,a.useCallback)(()=>{eh(),eA()},[eh,eA]);return{currentTokenPrice:h,tokensLeftPercent:S,isTxLoading:ek.isPending||eC.isPending,invest,approve:doApprove,isWalletLoading:P,status:_,errorMsg:x,nextPriceDropIn:L,seedingEndsIn:V,startPrice:O,floorPrice:F,raiseStartTime:q,raiseEndTime:Z,numOfTimeWindows:$,timeWindowDuration:H,currentWindow:Y,raisedAmount:K,goalAmount:ee,raisePercent:en,reset:()=>{E("idle"),j(""),I(!1),ek.reset(),eC.reset()},userBalance:es,userAllowance:eo,projectTokenDecimals:ey,raiseTokenDecimals:el,totalProjectTokenSupply:ec,projectStatus:ef,investCapPerWallet:ev,userCurrentInvestment:eM,refresh:eS}}}}]);